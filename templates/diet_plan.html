{% extends 'base.html'%} {% block content %}
<div class="container-flex justify-content-center ml-lg-5 pt-4">
    <div class="row px-10 ">
        <div class="col-12 col-lg-7 mb-3 mr-2">
            <!-----------------------------Carousel diet plan-------------------------->
            <div id="carouselExampleIndicators" class="carousel slide mt-3" data-ride="carousel" data-interval=false>
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="5"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="6"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <!-------------------------------------day of the week Monday------------>
                        <div class="justify-content-center day-of-the-week row  p-3 mb-4 font-weight-bold"><span class="">Monday</span>
                        </div>
                        <!-------------------------------------button Breakfast-------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4 pl-4"><button type="button" class="category_name btn btn-warning">Breakfast</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!------------------------------------------button Lunch ---------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Lunch</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------button Tea --------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Tea</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!---------------------------------------------button Diner ------------------>
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Diner</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-------------------------------------day of the week Tuesday------------>
                    <div class="carousel-item">
                        <div class="justify-content-center day-of-the-week row  p-3 mb-2 font-weight-bold"><span class="text-center">Tuesday</span>
                        </div>
                        <!-------------------------------------button Breakfast-------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-warning">Breakfast</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!------------------------------------------button Lunch ---------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Lunch</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------button Tea --------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Tea</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!---------------------------------------------button Diner ------------------>
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Diner</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                    </div>

                     <!-------------------------------------day of the week Wednesday------------>
                     <div class="carousel-item">
                        <div class="justify-content-center day-of-the-week row  p-3 mb-2 font-weight-bold"><span class="text-center">Wednesday</span>
                        </div>
                        <!-------------------------------------button Breakfast-------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-warning">Breakfast</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!------------------------------------------button Lunch ---------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Lunch</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------button Tea --------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Tea</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!---------------------------------------------button Diner ------------------>
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Diner</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                    </div>
                     <!-------------------------------------day of the week Thursday------------>
                     <div class="carousel-item">
                        <div class="justify-content-center day-of-the-week row  p-3 mb-2 font-weight-bold"><span class="text-center">Thursday</span>
                        </div>
                        <!-------------------------------------button Breakfast-------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-warning">Breakfast</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!------------------------------------------button Lunch ---------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Lunch</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------button Tea --------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Tea</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!---------------------------------------------button Diner ------------------>
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Diner</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                    </div>
                     <!-------------------------------------day of the week Friday------------>
                     <div class="carousel-item">
                        <div class="justify-content-center day-of-the-week row p-3 mb-2 font-weight-bold"><span class="text-center">Friday</span>
                        </div>
                        <!-------------------------------------button Breakfast-------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-warning">Breakfast</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!------------------------------------------button Lunch ---------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Lunch</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------button Tea --------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Tea</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!---------------------------------------------button Diner ------------------>
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Diner</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                    </div>
                     <!-------------------------------------day of the week Saturday------------>
                     <div class="carousel-item">
                        <div class="justify-content-center day-of-the-week row p-3 mb-2 font-weight-bold"><span class="text-center">Saturday</span>
                        </div>
                        <!-------------------------------------button Breakfast-------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-warning">Breakfast</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!------------------------------------------button Lunch ---------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Lunch</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------button Tea --------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Tea</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!---------------------------------------------button Diner ------------------>
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Diner</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                    </div>
                     <!-------------------------------------day of the week Sunday------------>
                     <div class="carousel-item">
                        <div class="justify-content-center day-of-the-week row p-3 mb-2 font-weight-bold"><span class="text-center">Sunday</span>
                        </div>
                        <!-------------------------------------button Breakfast-------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-warning">Breakfast</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!------------------------------------------button Lunch ---------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Lunch</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!-------------------------------------------button Tea --------------->
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Tea</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                        <!---------------------------------------------button Diner ------------------>
                        <div class="meal row mb-2 mx-3">
                            <div class="col-4"><button type="button" class="category_name btn btn-success">Diner</button></div>
                            <!------------------slide show recipe------------>
                            <div class="col-8 recipe-diet-planner">
                                <div class="container p-0 m-0">
                                    <div class="slideShowRecipeTitle row justify-content-center font-weight-bold">
                                    </div>
                                    <img src="{{url_for('static', filename='images/foodPlaceholder.png')}}"
                                        class="slideShowRecipeImage card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image">
                                </div>
                            </div>
                        </div>
                    </div>

                    
                      
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
        <!---------------------------------------------Side panel-------------------------->
        <div class="col-12 col-lg-4">
            <div class="row">
                <form class="col-12 form-inline md-form form-sm mb-3">
                    <i class="fas fa-search" aria-hidden="true"></i>
                    <input id="myInput" class="form-control form-control-sm ml-3 w-75" type="text" placeholder="Search"
                        aria-label="Search">
                </form>
                <div id="recipes-list" class="mt-1" data-spy="scroll" data-target="#navbar-example2" data-offset="0">

                </div>
            </div>
            <!----------Feedback for user that serch returned no results-------------->
            <div class="nothingFound" style="display:none">
                <p><span>Whoops!</span> </br>Sorry, but nothing matched your search. Please try some different
                    keywords.</p>
            </div>
        </div>
    </div>

    <!----------------------Buttons generate diet plan and shopping list------------------>

    <div class="row mb-5">
        <!-- Button trigger modal -->
        <div class="col-5 col-md-3">
            <button id="generate_diet_plan" type="button" class="btn btn-warning" data-toggle="modal"
                data-target="#exampleModalCenter">
                Generate diet plan
            </button>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-success" id="exampleModalCenterTitle">Diet plan</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="print" class="border pr-3 pl-3 ">

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- Button trigger modal -->
        <div class="col-5 col-md-4">
            <button type="button" class="btn btn-success" id="generate_shopping_list" data-toggle="modal"
                data-target="#exampleModalScrollable">
                Generate shopping list
            </button>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-success text-center" id="exampleModalScrollableTitle">Shoping
                            List
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group list-group-flush shopping_list">
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock %}

{% block scripts %}

<script type="text/javascript">
    $(document).ready(function () {

        const recipes = {{ recipes | tojson
    }};
    const recipesMap = new Map(recipes.map(r => [r.title, r]));

    $("table i").click(function () {
        $(this).parents("tr").remove()
    })

    //handle switching between categories buttons

    $(".carousel-item button").click(function () {
        if (!$(this).hasClass("btn-warning")) {
            $(this).parents(".carousel-item").find("button").removeClass("btn-warning").addClass("btn-success")
            $(this).addClass("btn-warning")
        }
    })

    // Fill in list with all recipes

    // 1. Find with jquery element to put recipes to 
    const $recipesList = $("#recipes-list");

    // 2. For each in recipes add new html object (create with jQuery) to recipes list

    recipes.forEach(function (recipe) {
        $newElem = $(`<div class="recipe-sidebar mb-4">
                                 <h5 class="rec-title text-center text-info">${recipe.title}</h5>
                                 
                                 <div class="px-3"><img src="${recipe.image}" class="rec-image card-img-top img-thumbnail rounded img-fluid max-width: 100% sidebar-image"></div>
                             </div>`)

        $newElem.click(function () {
            $slideShowRecipe = $(".carousel-item.active .btn-warning").parent()
            $slideShowRecipe.siblings(".recipe-diet-planner").find(".slideShowRecipeTitle").text($(this).find(".rec-title").text())
            $slideShowRecipe.siblings(".recipe-diet-planner").find(".slideShowRecipeImage").attr("src", $(this).find(".rec-image").attr("src"))
        });

        $recipesList.append($newElem)
    })


    $("#myInput").keyup(function () {
        var currentValue = $(this).val().toLowerCase().trim();

        // Get all cards
        var allCards = $("#recipes-list").find(".recipe-sidebar");

        // Remove display none from all cards
        allCards.show();

        // Filter cards that lowercase title don't start with search value
        var nonMatchingCards = allCards.filter(function () {
            var titleText = $(this).find(".rec-title ").text().toLowerCase().trim();
            return !titleText.startsWith(currentValue);
        });


        // Set display none to all filtered cards
        nonMatchingCards.hide();

        // if there are no search results show info 
        if (nonMatchingCards.length === allCards.length) {
            $(".nothingFound").show();

        } else {
            $(".nothingFound").hide();

        }
    });

    /*---------------------------Generate diet plan button----------------------*/

    $("#generate_diet_plan").click(function () {
        $print = $("#print");
        $print.empty();

        $(".carousel-item").each(function (current_card) {
            $print.append(`<div class="row bg-warning p-3 border font-weight-bold">${$(this).find(".day-of-the-week").text()}</div>`)
            $print.append(`<div class="row p-2 border-top-0">
                        <div class="col-4 text-center p-1 font-weight-bold">Meal:</div>
                        <div class="col-4 text-center p-1 font-weight-bold">Ingredients List:</div>
                        <div class="col-4 text-center p-1 font-weight-bold">Steps:</div>
                </div>`)

           $(this).find(".category_name").each(function (category_index) {

                const dish_name = $(this).parents(".meal").find(`.slideShowRecipeTitle`).text();
                if(dish_name && dish_name.trim() !== "") {
                    const recipe = recipesMap.get(dish_name);

                    $row = $(`<div class="row"></div>`)
                    $col1 = $(`<div class="col-4 nopadding ">
                                    <div class="container">
                                        <div class="row  p-1 border-bottom border-top text-uppercase font-weight-bold">${$(this).text()}</div>
                                        <div class="row  p-1 font-italic">${dish_name}</div>
                                        </div>
                                </div>`)
                    $col2 = $(`<div class="col-4 border"></div>`)
                    $col3 = $(`<div class="col-4 border"></div>`)
                    $inglist = $(`<ul class="small"></ul>`)
                    recipe.ingredients.forEach(function (i) {
                        $inglist.append(`<li>${i.name}</li>`)
                    })

                    $steplist = $(`<ol class="small"></ol>`)
                    if (recipe.recipe && Array.isArray(recipe.recipe)) {
                        recipe.recipe.forEach(function (step) {
                            $steplist.append(`<li>${step}</li>`)
                        })
                    }
                    $col2.append($inglist)
                    $col3.append($steplist)
                    $row.append($col1)
                    $row.append($col2)
                    $row.append($col3)

                    $print.append($row)
                }
            })
           
        })

    })


    /*--------------------------Generate shopping list button-------------------*/

    $("#generate_shopping_list").click(function () {

        $shopping_list = $(".shopping_list");
        $shopping_list.empty();

        let all_ingredients = new Map()

        $(".carousel-item").each(function (day_index) {
            $(this).find(".category_name").each(function (category_index) {

                const dish_name = $(this).parents(".meal").find(`.slideShowRecipeTitle`).text();
                if(dish_name && dish_name.trim() !== "") {
                    const recipe = recipesMap.get(dish_name);

                    recipe.ingredients.forEach(i => {
                        const floatAmount = parseFloat(i.amount);

                        if (all_ingredients.has(i.name)) {
                            if (all_ingredients.get(i.name).has(i.unit)) {
                                const newValue = all_ingredients.get(i.name).get(i.unit) + floatAmount
                                all_ingredients.get(i.name).set(i.unit, newValue);

                            } else {
                                all_ingredients.get(i.name).set(i.unit, floatAmount)
                            }
                        } else {
                            all_ingredients.set(i.name, new Map())
                            all_ingredients.get(i.name).set(i.unit, floatAmount)
                        }
                    })

                }
            })


        })

        for (const [name, unit_amount] of all_ingredients.entries()) {


            for (const [unit, amount] of unit_amount.entries()) {
                $shopping_list.append(`<li class ="list-group-item">
                                             <div class="row">
                                                <div class="col-3">${name}</div>
                                                <div class="col-1">${amount}</div>
                                                <div class="col-1">${unit}</div>
                                                </div>
                                        </li>`)
            }
        }


    })
})

</script>

{% endblock %}